<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>G√©n√©rateur de Prompts Marketing</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        :root {
            --primary: #6366f1;
            --success: #10b981;
            --bg: #f8fafc;
            --card: #ffffff;
            --text: #1e293b;
            --text-light: #64748b;
            --border: #e2e8f0;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f1f5f9;
            color: var(--text);
            line-height: 1.5;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }
        .container { width: 100%; max-width: 500px; background: var(--card); min-height: 100vh; position: relative; display: flex; flex-direction: column; }

        .screen { display: none; padding: 2rem 1.5rem; flex-grow: 1; flex-direction: column; }
        .screen.active { display: flex; }

        #welcomeScreen { 
            background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%); 
            color: white; text-align: center; justify-content: center; 
        }
        .logo-large { font-size: 5rem; margin-bottom: 1.5rem; }
        .welcome-title { font-size: 2rem; font-weight: 800; margin-bottom: 1rem; line-height: 1.2; }
        .welcome-desc { font-size: 1.1rem; opacity: 0.9; margin-bottom: 2rem; }

        .progress-bar { height: 6px; background: #e2e8f0; position: sticky; top: 0; display: none; }
        .progress-fill { height: 100%; background: var(--primary); transition: width 0.3s ease; width: 0%; }

        .question-label { font-size: 1.25rem; font-weight: 700; margin-bottom: 1.5rem; color: var(--text); }
        input, textarea, select {
            width: 100%; padding: 1.1rem; border: 2px solid var(--border); border-radius: 12px; 
            font-size: 16px; margin-bottom: 1rem; background: #f8fafc;
        }
        input:focus, select:focus, textarea:focus { border-color: var(--primary); outline: none; background: #fff; }

        .library-box { background: #fff9eb; padding: 1rem; border-radius: 12px; border: 1px dashed #f59e0b; margin-bottom: 1.5rem; }
        .library-box label { font-size: 0.85rem; font-weight: 800; color: #b45309; display: block; margin-bottom: 0.5rem; }

        .btn { 
            padding: 1.1rem; border: none; border-radius: 14px; font-weight: 700; font-size: 1rem; cursor: pointer;
            transition: all 0.2s; text-align: center; text-decoration: none;
        }
        .btn-primary { background: var(--primary); color: white; box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3); }
        .btn-outline { background: transparent; border: 2px solid var(--border); color: var(--text-light); margin-top: 1rem; }
        .btn:disabled { background: #cbd5e1; box-shadow: none; cursor: not-allowed; }

        .tool-grid { display: grid; grid-template-columns: 1fr; gap: 1rem; }
        .tool-card {
            padding: 1.25rem; border: 2px solid var(--border); border-radius: 16px; 
            font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 1rem;
        }
        .tool-card span { font-size: 1.5rem; }

        #promptOutput { 
            background: #1e293b; color: #f1f5f9; padding: 1rem; border-radius: 12px; 
            font-family: monospace; font-size: 0.85rem; overflow-y: auto; margin: 1rem 0; flex-grow: 1;
            white-space: pre-wrap;
        }
        .ai-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem; margin-bottom: 1rem; }
        .ai-link { padding: 0.8rem; border-radius: 10px; color: white; text-align: center; font-weight: 600; text-decoration: none; font-size: 0.8rem; }
    </style>
</head>
<body>

<div class="container">
    <div class="progress-bar" id="progressBar"><div class="progress-fill" id="progressFill"></div></div>

    <div class="screen active" id="welcomeScreen">
        <div class="logo-large">üöÄ</div>
        <h1 class="welcome-title">G√©n√©rateur de Prompts Marketing</h1>
        <p class="welcome-desc">Cr√©ez des contenus percutants en quelques √©tapes intuitives.</p>
        <button class="btn btn-primary" onclick="startApp()">Lance le g√©n√©rateur de prompt ‚ú®</button>
        <a href="https://shop.beacons.ai/brilleetvibre/9cff3d0a-5313-4c90-9db5-7e6d5ec54309" class="btn btn-outline" style="color:white; border-color:white; opacity:0.8" target="_blank">D√©couvrir Code Libert√©</a>
    </div>

    <div class="screen" id="stepAvatar">
        <label class="question-label">1. Qui est ton client id√©al ?</label>
        <textarea id="avatarClient" placeholder="Ex: Femmes entrepreneurs de 30-45 ans..." rows="5" oninput="validateStep('stepAvatar')"></textarea>
        <button class="btn btn-primary" id="btnStepAvatar" onclick="nextScreen('stepOffer')" disabled>Suivant</button>
    </div>

    <div class="screen" id="stepOffer">
        <label class="question-label">2. Que vends-tu pr√©cis√©ment ?</label>
        <select id="offerType" onchange="validateStep('stepOffer')">
            <option value="">S√©lectionne ton type d'offre</option>
            <option value="une Formation en ligne">Formation en ligne</option>
            <option value="un Coaching">Coaching</option>
            <option value="une Prestation">Prestation de service</option>
            <option value="autre">Autre</option>
        </select>
        <button class="btn btn-primary" id="btnStepOffer" onclick="nextScreen('stepNiche')" disabled>Suivant</button>
        <button class="btn btn-outline" onclick="prevScreen('stepAvatar')">Retour</button>
    </div>

    <div class="screen" id="stepNiche">
        <label class="question-label">3. Quelle est ta th√©matique / niche ?</label>
        <input type="text" id="userNiche" placeholder="Ex: Yoga, Marketing, Bien-√™tre..." oninput="validateStep('stepNiche')">
        <button class="btn btn-primary" id="btnStepNiche" onclick="nextScreen('stepToolSelect')" disabled>Suivant</button>
        <button class="btn btn-outline" onclick="prevScreen('stepOffer')">Retour</button>
    </div>

    <div class="screen" id="stepToolSelect">
        <label class="question-label">4. Quel outil souhaites-tu utiliser ?</label>
        <div class="tool-grid">
            <div class="tool-card" onclick="pickTool('tab-bio')"><span>üìù</span> Auditer ma Bio</div>
            <div class="tool-card" onclick="pickTool('tab-hooks')"><span>üé£</span> Cr√©er des Hooks</div>
            <div class="tool-card" onclick="pickTool('tab-caption')"><span>‚úçÔ∏è</span> Cr√©er des L√©gendes</div>
            <div class="tool-card" onclick="pickTool('tab-improve')"><span>ü™Ñ</span> Perfectionner une L√©gende</div>
            <div class="tool-card" onclick="pickTool('tab-reels')"><span>üé•</span> Id√©es Reels / Carrousel</div>
        </div>
        <button class="btn btn-outline" onclick="prevScreen('stepNiche')" style="margin-top: 2rem">Retour</button>
    </div>

    <div class="screen" id="stepConfig">
        
        <div id="tab-bio" class="tool-config" style="display:none">
            <label class="question-label">Ma Bio Actuelle</label>
            <textarea id="bio-current" placeholder="Colle ta bio ici..." rows="4"></textarea>
        </div>

        <div id="tab-caption" class="tool-config" style="display:none">
            <label class="question-label">D√©tails de la l√©gende</label>
            <input type="text" id="cap-hook-planned" placeholder="Phrase sur ta vid√©o">
            <select id="cap-tone">
                <option value="Inspirant">Inspirant</option>
                <option value="Expert / √âducatif">Expert / √âducatif</option>
                <option value="Humoristique">Humoristique</option>
                <option value="Direct / Cash">Direct / Cash</option>
            </select>
            <textarea id="cap-infos" placeholder="Infos cl√©s / Anecdotes..." rows="3"></textarea>
            <input type="text" id="cap-cta" placeholder="CTA (ex: Commente GO)">
        </div>

        <div id="tab-improve" class="tool-config" style="display:none">
            <label class="question-label">Am√©liorer ma l√©gende</label>
            <textarea id="improve-text" placeholder="Colle ta l√©gende existante ici..." rows="6"></textarea>
            <label style="font-size: 0.9rem; font-weight: 600;">Objectif de l'am√©lioration</label>
            <select id="improve-goal">
                <option value="la structurer selon la m√©thode AIDA (Attention, Int√©r√™t, D√©sir, Action)">Structurer avec la m√©thode AIDA</option>
                <option value="la rendre plus dynamique et captivante">Plus dynamique / captivante</option>
                <option value="mieux vendre mon offre">Plus de conversion / Vente</option>
                <option value="la rendre plus courte et percutante">Plus courte et punchy</option>
                <option value="ajouter du storytelling et de l'√©motion">Plus de Storytelling / √âmotion</option>
            </select>
            <label style="font-size: 0.9rem; font-weight: 600;">Ton souhait√©</label>
            <select id="improve-tone">
                <option value="Professionnel mais accessible">Pro & Accessible</option>
                <option value="Amical et chaleureux">Amical & Chaleureux</option>
                <option value="Direct et sans filtre">Direct / Cash</option>
                <option value="Myst√©rieux et intriguant">Myst√©rieux / Intrigant</option>
            </select>
        </div>

        <div id="tab-hooks" class="tool-config" style="display:none">
            <label class="question-label">Param√®tres Hooks</label>
            <div class="library-box">
                <label>üí° Biblioth√®que de Hooks Pr√™ts √† l'emploi</label>
                <select id="hookLibrary" onchange="applyHookLibrary()">
                    <option value="">-- Choisir un mod√®le --</option>
                    <optgroup label="üî• Stopscroller">
                        <option value="Tu vas pas croire ce qui se passe apr√®s.">Tu vas pas croire ce qui se passe apr√®s.</option>
                        <option value="C‚Äôest peut-√™tre le truc le plus important que tu verras aujourd‚Äôhui.">C‚Äôest peut-√™tre le truc le plus important...</option>
                        <option value="Cette erreur te co√ªte peut-√™tre des milliers d‚Äôeuros.">Cette erreur te co√ªte des milliers d‚Äôeuros.</option>
                        <option value="Tout le monde fait cette erreur. Ne sois pas comme eux.">Tout le monde fait cette erreur...</option>
                    </optgroup>
                </select>
            </div>
            <input type="text" id="hook-topic" placeholder="Sujet ou s√©lectionne ci-dessus">
            <select id="hook-angle">
                <option value="Curiosit√©">Curiosit√©</option>
                <option value="Urgence / FOMO">Urgence / FOMO</option>
                <option value="Casser un mythe">Contre-intuitif</option>
            </select>
        </div>

        <div id="tab-reels" class="tool-config" style="display:none">
            <label class="question-label">Param√®tres Strat√©gie</label>
            <input type="text" id="reel-theme" placeholder="Th√©matique globale">
            <select id="reel-format">
                <option value="Reels">Reels</option>
                <option value="Carrousel">Carrousel</option>
            </select>
            <select id="reel-goal">
                <option value="Viralit√©">Viralit√©</option>
                <option value="Autorit√©">Autorit√©</option>
                <option value="Conversion">Conversion</option>
            </select>
        </div>

        <button class="btn btn-primary" onclick="generateNow()" style="margin-top: 1rem">G√©n√©rer mon Prompt ‚ú®</button>
        <button class="btn btn-outline" onclick="prevScreen('stepToolSelect')">Changer d'outil</button>
    </div>

    <div class="screen" id="stepResult">
        <label class="question-label">Ton Prompt est pr√™t !</label>
        <div class="ai-grid" id="aiButtons"></div>
        <button class="btn btn-primary" onclick="copyToClipboard()" style="background:var(--success)">üìã Copier le Prompt</button>
        <div id="promptOutput"></div>
        <button class="btn btn-outline" onclick="location.reload()">‚Ü© Recommencer de z√©ro</button>
    </div>
</div>

<script>
    let currentTool = '';
    const screens = ['welcomeScreen', 'stepAvatar', 'stepOffer', 'stepNiche', 'stepToolSelect', 'stepConfig', 'stepResult'];

    function updateProgress(screenId) {
        const idx = screens.indexOf(screenId);
        const percent = (idx / (screens.length - 1)) * 100;
        document.getElementById('progressFill').style.width = percent + '%';
        document.getElementById('progressBar').style.display = screenId === 'welcomeScreen' ? 'none' : 'flex';
    }

    function showScreen(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        updateProgress(id);
        window.scrollTo(0,0);
    }

    function startApp() { showScreen('stepAvatar'); }
    function nextScreen(id) { showScreen(id); }
    function prevScreen(id) { showScreen(id); }

    function validateStep(stepId) {
        let isValid = false;
        if (stepId === 'stepAvatar') isValid = document.getElementById('avatarClient').value.trim().length > 3;
        if (stepId === 'stepOffer') isValid = document.getElementById('offerType').value !== "";
        if (stepId === 'stepNiche') isValid = document.getElementById('userNiche').value.trim().length > 2;
        const btnId = 'btn' + stepId.charAt(0).toUpperCase() + stepId.slice(1);
        document.getElementById(btnId).disabled = !isValid;
    }

    function applyHookLibrary() {
        const lib = document.getElementById('hookLibrary');
        const input = document.getElementById('hook-topic');
        if (lib.value) { input.value = lib.value; input.focus(); }
    }

    function pickTool(toolId) {
        currentTool = toolId;
        document.querySelectorAll('.tool-config').forEach(c => c.style.display = 'none');
        document.getElementById(toolId).style.display = 'block';
        nextScreen('stepConfig');
    }

    function generateNow() {
        const userData = {
            avatar: document.getElementById('avatarClient').value,
            offer: document.getElementById('offerType').value,
            niche: document.getElementById('userNiche').value
        };

        let prompt = "";

        if (currentTool === 'tab-improve') {
            const originalText = document.getElementById('improve-text').value;
            const goal = document.getElementById('improve-goal').value;
            const tone = document.getElementById('improve-tone').value;
            
            let specialInstructions = "";
            if (goal.includes("AIDA")) {
                specialInstructions = `\nCONSIGNES SP√âCIFIQUES M√âTHODE AIDA :
- ATTENTION : Une accroche choc qui arr√™te le scroll.
- INT√âR√äT : Pr√©senter un fait ou une douleur sp√©cifique √† mon avatar.
- D√âSIR : Expliquer les b√©n√©fices de mon offre (${userData.offer}) ou la transformation.
- ACTION : Un appel √† l'action clair et direct.`;
            }

            prompt = `Tu es un expert en Copywriting. Ta mission est d'optimiser la l√©gende Instagram suivante pour mon client id√©al (${userData.avatar}).

L√âGENDE ACTUELLE :
"${originalText}"

OBJECTIF : ${goal}
TON : ${tone}
NICHE : ${userData.niche}
OFFRE : ${userData.offer}${specialInstructions}

Lignes directrices :
1. Am√©liore la clart√© et l'impact.
2. Utilise des sauts de ligne pour a√©rer le texte.
3. Propose 2 variantes optimis√©es, pr√™tes √† l'emploi.`;
        }
        else if (currentTool === 'tab-bio') {
            const current = document.getElementById('bio-current').value;
            prompt = `PROMPT AUDIT DE TA BIO\nMA BIO ACTUELLE : ${current || 'N/A'}\nClient id√©al : ${userData.avatar}\nNiche : ${userData.niche}\nOffre : ${userData.offer}\nCONSIGNES : Propose 3 variantes de bio optimis√©es SEO de max 150 caract√®res.`;
        } 
        else if (currentTool === 'tab-caption') {
            const hookPlanned = document.getElementById('cap-hook-planned').value;
            prompt = `R√©dige une l√©gende Instagram compl√®te.\nHook vid√©o : ${hookPlanned}\nTon : ${document.getElementById('cap-tone').value}\nInfos : ${document.getElementById('cap-infos').value}\nCTA : ${document.getElementById('cap-cta').value}\nCible : ${userData.avatar}\nOffre : ${userData.offer}`;
        }
        else if (currentTool === 'tab-hooks') {
            prompt = `G√©n√®re 10 hooks ultra-percutants pour mon client id√©al (${userData.avatar}).\nSujet : ${document.getElementById('hook-topic').value}\nAngle : ${document.getElementById('hook-angle').value}\nNiche : ${userData.niche}`;
        }
        else if (currentTool === 'tab-reels') {
            prompt = `G√©n√®re 5 id√©es de concepts ${document.getElementById('reel-format').value} viraux.\nTh√®me : ${document.getElementById('reel-theme').value}\nObjectif : ${document.getElementById('reel-goal').value}\nCible : ${userData.avatar}\nNiche : ${userData.niche}`;
        }

        document.getElementById('promptOutput').innerText = prompt;
        createAIButtons(prompt);
        nextScreen('stepResult');
    }

    function createAIButtons(p) {
        const enc = encodeURIComponent(p);
        const container = document.getElementById('aiButtons');
        container.innerHTML = [
            {n:'ChatGPT', u:`https://chat.openai.com/?q=${enc}`, b:'#10a37f'},
            {n:'Claude', u:`https://claude.ai/new?q=${enc}`, b:'#d97757'},
            {n:'Gemini', u:`https://gemini.google.com/app?q=${enc}`, b:'#4285f4'}
        ].map(l => `<a href="${l.u}" class="ai-link" style="background:${l.b}" target="_blank">${l.n}</a>`).join('');
    }

    function copyToClipboard() {
        navigator.clipboard.writeText(document.getElementById('promptOutput').innerText);
        alert("Prompt copi√© !");
    }
</script>
</body>
</html>
